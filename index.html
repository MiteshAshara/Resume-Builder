<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Builder</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
        }

        .container {
            display: flex;
            width: 100%;
            min-height: 100vh;
        }

        .form-container {
            width: 40%;
            padding: 20px;
            background-color: #f5f5f5;
            overflow-y: auto;
        }

        .preview-container {
            width: 60%;
            padding: 20px;
            overflow-y: auto;
            background-color: #fff;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        input,
        textarea {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        button {
            padding: 10px 15px;
            background-color: #2c3e50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        button:hover {
            background-color: #1a252f;
        }

        .section-title {
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
            margin-top: 20px;
        }

        .add-btn {
            background-color: #27ae60;
            margin-bottom: 15px;
        }

        .preview-wrapper {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .resume {
            font-family: Arial, sans-serif;
            color: #000;
        }

        .resume h1 {
            text-align: left;
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 0;
            margin-top: 0;
        }

        .resume .contact-info {
            text-align: left;
            margin-bottom: 10px;
            font-size: 1em;
        }

        .resume .contact-info a {
            color: #0056cc;
            text-decoration: underline;
            word-break: break-all;
        }

        .resume .section-title,
        .resume h2 {
            font-size: 1.1em;
            font-weight: bold;
            text-transform: uppercase;
            border-bottom: 1px solid #000;
            margin-bottom: 5px;
            margin-top: 20px;
            padding-bottom: 2px;
            letter-spacing: 1px;
        }

        .resume .section {
            margin-bottom: 18px;
        }

        .resume table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 10px;
        }

        .resume th,
        .resume td {
            text-align: left;
            vertical-align: top;
            padding: 2px 8px 2px 0;
            font-size: 1em;
        }

        .resume th {
            width: 110px;
            font-weight: bold;
            color: #000;
            padding-right: 10px;
        }

        .resume .project-title {
            font-weight: bold;
            font-size: 1.05em;
        }

        .resume .project-title a {
            color: #0056cc;
            text-decoration: underline;
            font-weight: normal;
            font-size: 1em;
        }

        .resume ul {
            margin: 0 0 0 18px;
            padding: 0;
        }

        .resume li {
            margin-bottom: 2px;
            font-size: 0.98em;
        }

        .resume .education-table {
            width: 100%;
            border-collapse: collapse;
        }

        .resume .education-table td {
            padding: 2px 8px 2px 0;
            font-size: 1em;
            border: none;
        }

        .resume .education-degree {
            font-weight: normal;
        }

        .resume .education-institute {
            font-size: 0.98em;
        }

        .resume .education-cgpa {
            text-align: right;
            font-size: 0.98em;
            white-space: nowrap;
        }

        .resume hr {
            border: none;
            border-top: 1px solid #000;
            margin: 10px 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="form-container">
            <h1>Resume Builder</h1>
            <form id="resumeForm">
                <div class="section-title">Personal Information</div>
                <div class="form-group">
                    <label for="fullName">Full Name</label>
                    <input type="text" id="fullName" onchange="updateResume()" value="Test Name">
                </div>
                <div class="form-group">
                    <label for="phone">Phone</label>
                    <input type="text" id="phone" onchange="updateResume()" value="1234567890">
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" onchange="updateResume()" value="test@email.com">
                </div>
                <div class="form-group">
                    <label for="location">Location</label>
                    <input type="text" id="location" onchange="updateResume()" value="Test City, Test Country">
                </div>
                <div class="form-group">
                    <label for="linkedin">LinkedIn</label>
                    <input type="text" id="linkedin" onchange="updateResume()" value="linkedin.com/in/test">
                </div>
                <div class="form-group">
                    <label for="github">GitHub</label>
                    <input type="text" id="github" onchange="updateResume()" value="github.com/test">
                </div>

                <div class="section-title">Tech Stack</div>
                <div class="form-group">
                    <label for="techStack">Tech Stack (use semicolons to separate categories)</label>
                    <textarea id="techStack" rows="6"
                        onchange="updateResume()">Programming Languages: TestLang1, TestLang2; Frameworks: TestFramework; Frontend: TestHTML, TestCSS; Database: TestDB; Version: TestVersion</textarea>
                </div>

                <div class="section-title">Projects</div>
                <div id="projectInputs">
                    <div class="project-input">
                        <div class="form-group">
                            <label>Project Title & Technologies</label>
                            <input type="text" class="project-title-input" onchange="updateResume()" value="Test Project 1">
                        </div>
                        <div class="form-group">
                            <label>Project Description</label>
                            <textarea class="project-description-input" rows="4"
                                onchange="updateResume()">This is a test project description 1.</textarea>
                        </div>
                        <div class="form-group">
                            <label>Achievements/Features (use semicolons to separate bullet points)</label>
                            <textarea class="project-features-input" rows="8"
                                onchange="updateResume()">Test feature 1; Test feature 2; Test feature 3</textarea>
                        </div>
                    </div>
                    <div class="project-input">
                        <div class="form-group">
                            <label>Project Title & Technologies</label>
                            <input type="text" class="project-title-input" onchange="updateResume()" value="Test Project 2">
                        </div>
                        <div class="form-group">
                            <label>Project Description</label>
                            <textarea class="project-description-input" rows="4"
                                onchange="updateResume()">This is a test project description 2.</textarea>
                        </div>
                        <div class="form-group">
                            <label>Achievements/Features (use semicolons to separate bullet points)</label>
                            <textarea class="project-features-input" rows="8"
                                onchange="updateResume()">Test feature A; Test feature B</textarea>
                        </div>
                    </div>
                </div>
                <button type="button" class="add-btn" onclick="addProjectField()">+ Add Project</button>

                <div class="section-title">Education</div>
                <div id="educationInputs">
                    <div class="education-input">
                        <div class="form-group">
                            <label>Degree & Institution</label>
                            <input type="text" class="education-degree-input" onchange="updateResume()"
                                value="Test University (Test Degree)">
                        </div>
                        <div class="form-group">
                            <label>Year & CGPA</label>
                            <input type="text" class="education-year-input" onchange="updateResume()"
                                value="2000 - 2004 (CGPA: 10.00)">
                        </div>
                    </div>
                    <div class="education-input">
                        <div class="form-group">
                            <label>Degree & Institution</label>
                            <input type="text" class="education-degree-input" onchange="updateResume()"
                                value="Test Institute (Test Masters)">
                        </div>
                        <div class="form-group">
                            <label>Year & CGPA</label>
                            <input type="text" class="education-year-input" onchange="updateResume()"
                                value="2005 - 2007 (CGPA: 9.99)">
                        </div>
                    </div>
                </div>
                <button type="button" class="add-btn" onclick="addEducationField()">+ Add Education</button>

            </form>
        </div>

        <div class="preview-container">
            <h1>Resume Preview</h1>
            <button id="downloadBtn" style="margin-bottom:15px;">Download as PDF</button>
            <div class="preview-wrapper">
                <div id="resumePreview" class="resume">
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script>
        window.onload = function () {
            updateResume();
        };

        function updateResume() {
            const name = document.getElementById('fullName').value;
            const phone = document.getElementById('phone').value;
            const email = document.getElementById('email').value;
            const location = document.getElementById('location').value;
            const linkedin = document.getElementById('linkedin').value;
            const github = document.getElementById('github').value;
            const techStackText = document.getElementById('techStack').value;

            let contactHtml = `
                <div class="contact-info">
                    ${phone} | ${email}<br>
                    ${location}<br>
                    LinkedIn: <a href="https://${linkedin.replace(/^https?:\/\//, '')}" target="_blank">${linkedin}</a><br>
                    GitHub: <a href="https://${github.replace(/^https?:\/\//, '')}" target="_blank">${github}</a>
                </div>
                <hr>
            `;

            let techRows = '';
            let versionRow = '';
            const seenLabels = new Set();
            techStackText.split(';').forEach(cat => {
                let [label, ...rest] = cat.split(':');
                if (rest.length > 0) {
                    let value = rest.join(':').trim();
                    label = label.trim();
                    if (/env/i.test(label)) {
                        versionRow = `<tr><th>Environment:</th><td>${value}</td></tr>`;
                    } else if (!seenLabels.has(label.toLowerCase())) {
                        techRows += `<tr><th>${label}:</th><td>${value}</td></tr>`;
                        seenLabels.add(label.toLowerCase());
                    }
                }
            });

            let techStackHtml = `
                <div class="section">
                    <div class="section-title">TECH STACK</div>
                    <table>${techRows}</table>
                </div>
            `;

            let versionHtml = '';
            if (versionRow) {
                versionHtml = `
                    <div class="section">
                        <div class="section-title">VERSION</div>
                        <table>${versionRow}</table>
                    </div>
                `;
            }
            const projectInputs = document.querySelectorAll('.project-input');
            let projectsHtml = '';
            projectInputs.forEach(input => {
                let title = input.querySelector('.project-title-input').value;
                let description = input.querySelector('.project-description-input').value;
                let features = input.querySelector('.project-features-input').value;

                let titleText = title;
                let githubMatch = title.match(/-?\s*GitHub:?/i);
                let githubLink = '';
                if (githubMatch) {

                    let urlMatch = description.match(/https?:\/\/[^\s]+/i) || title.match(/https?:\/\/[^\s]+/i);
                    githubLink = urlMatch ? urlMatch[0] : '';
                    titleText = title.replace(/-?\s*GitHub:?/i, '').trim();
                }

                let titleHtml = `<span class="project-title">${titleText}`;
                if (githubLink) {
                    titleHtml += ` - <a href="${githubLink}" target="_blank">GitHub</a>`;
                }
                titleHtml += `</span>`;

                let featuresHtml = '';
                if (features.trim()) {
                    let points = features.split(';').map(f => f.trim()).filter(f => f);
                    featuresHtml = '<ul>' + points.map(f => `<li>${f}</li>`).join('') + '</ul>';
                }

                projectsHtml += `
                    <div style="margin-bottom:10px;">
                        ${titleHtml}<br>
                        <span style="font-size:0.98em;">${description}</span>
                        ${featuresHtml}
                    </div>
                `;
            });

            let projectsSectionHtml = `
                <div class="section">
                    <div class="section-title">PROJECTS</div>
                    ${projectsHtml}
                </div>
            `;

            const educationInputs = document.querySelectorAll('.education-input');
            let educationRows = '';
            educationInputs.forEach(input => {
                let degree = input.querySelector('.education-degree-input').value;
                let year = input.querySelector('.education-year-input').value;
                let cgpa = '';
                let yearText = year;
                let cgpaMatch = year.match(/\(CGPA:\s*([^)]+)\)/i);
                if (cgpaMatch) {
                    cgpa = cgpaMatch[1];
                    yearText = year.replace(/\(CGPA:[^)]+\)/i, '').trim();
                }
                educationRows += `
                    <tr>
                        <td style="width:110px;">${yearText}</td>
                        <td>
                            <span class="education-degree">${degree}</span>
                        </td>
                        <td class="education-cgpa">${cgpa ? '(CGPA: ' + cgpa + ')' : ''}</td>
                    </tr>
                `;
            });
            let educationHtml = `
                <div class="section">
                    <div class="section-title">EDUCATION</div>
                    <table class="education-table">
                        ${educationRows}
                    </table>
                </div>
            `;

            document.getElementById('resumePreview').innerHTML = `
                <h1>${name}</h1>
                ${contactHtml}
                ${techStackHtml}
                ${versionHtml}
                ${projectsSectionHtml}
                ${educationHtml}
            `;
        }

        function updateTechStack() {
            const techStackContainer = document.getElementById('previewTechStack');
            techStackContainer.innerHTML = '';

            const techStackText = document.getElementById('techStack').value;
            const techCategories = techStackText.split(';').filter(cat => cat.trim() !== '');

            techCategories.forEach(category => {
                const li = document.createElement('li');
                li.innerHTML = category.trim();
                techStackContainer.appendChild(li);
            });
        }

        function updateProjects() {
            const projectsContainer = document.getElementById('previewProjects');
            projectsContainer.innerHTML = '';

            const projectInputs = document.querySelectorAll('.project-input');

            projectInputs.forEach(input => {
                const title = input.querySelector('.project-title-input').value;
                const description = input.querySelector('.project-description-input').value;
                const features = input.querySelector('.project-features-input').value;

                const projectItem = document.createElement('div');
                projectItem.className = 'project-item';

                const titleEl = document.createElement('h3');
                titleEl.textContent = title;

                const descEl = document.createElement('p');
                descEl.className = 'project-description';
                descEl.textContent = description;

                const listEl = document.createElement('ul');

                const points = features.split(';').filter(point => point.trim() !== '');
                points.forEach(point => {
                    const li = document.createElement('li');
                    li.textContent = point.trim();
                    listEl.appendChild(li);
                });

                projectItem.appendChild(titleEl);
                projectItem.appendChild(descEl);
                projectItem.appendChild(listEl);

                projectsContainer.appendChild(projectItem);
            });
        }

        function updateEducation() {
            const educationContainer = document.getElementById('previewEducation');
            educationContainer.innerHTML = '';

            const educationInputs = document.querySelectorAll('.education-input');

            educationInputs.forEach(input => {
                const degree = input.querySelector('.education-degree-input').value;
                const year = input.querySelector('.education-year-input').value;

                const eduItem = document.createElement('div');
                eduItem.className = 'education-item';

                const degreeEl = document.createElement('h3');
                degreeEl.textContent = degree;

                const yearEl = document.createElement('p');
                yearEl.textContent = year;

                eduItem.appendChild(degreeEl);
                eduItem.appendChild(yearEl);

                educationContainer.appendChild(eduItem);
            });
        }

        function addProjectField() {
            const container = document.getElementById('projectInputs');
            const newField = document.createElement('div');
            newField.className = 'project-input';
            newField.innerHTML = `
                <div class="form-group">
                    <label>Project Title & Technologies</label>
                    <input type="text" class="project-title-input" onchange="updateResume()">
                </div>
                <div class="form-group">
                    <label>Project Description</label>
                    <textarea class="project-description-input" rows="4" onchange="updateResume()"></textarea>
                </div>
                <div class="form-group">
                    <label>Achievements/Features (use semicolons to separate bullet points)</label>
                    <textarea class="project-features-input" rows="6" onchange="updateResume()"></textarea>
                </div>
                <hr>
            `;
            container.appendChild(newField);
        }

        function addEducationField() {
            const container = document.getElementById('educationInputs');
            const newField = document.createElement('div');
            newField.className = 'education-input';
            newField.innerHTML = `
                <div class="form-group">
                    <label>Degree & Institution</label>
                    <input type="text" class="education-degree-input" onchange="updateResume()">
                </div>
                <div class="form-group">
                    <label>Year & CGPA</label>
                    <input type="text" class="education-year-input" onchange="updateResume()">
                </div>
                <hr>
            `;
            container.appendChild(newField);
        }

        document.getElementById('downloadBtn').addEventListener('click', function () {
            const element = document.getElementById('resumePreview');
            const opt = {
                margin: 0.5,
                filename: 'resume.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
            };
            html2pdf().set(opt).from(element).save();
        });
    </script>
</body>

</html>